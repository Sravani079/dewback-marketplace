<div class="container mt-5">
  <h2 class="mb-4 text-center text-success">
    ðŸ“¥ Your Trade Inbox
  </h2>

  <% if @proposals.present? && @proposals.any? %>
    <ul class="list-group shadow-sm">
      <% @proposals.each do |proposal| %>
        <% status_class = case proposal.status
          when "accepted" then "text-success"
          when "rejected" then "text-danger"
          else "text-primary"
        end %>

        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <h6 class="mb-1">
              <i class="bi bi-arrow-left-right me-1"></i>
              Proposal #<%= proposal.id %>
            </h6>
            <p class="mb-0 small text-muted">
              From: <strong><%= proposal.proposer&.email || "Unknown" %></strong>
            </p>
            <p class="mb-0 small">
              Status: <span class="<%= status_class %> fw-semibold"><%= proposal.status.capitalize %></span>
            </p>
          </div>

          <div class="btn-group">
            <%= link_to "View", trade_proposal_details_path(proposal), class: "btn btn-sm btn-outline-primary" %>
            <% if proposal.status == "pending" && proposal.recipient == current_user %>
              <%= link_to "Counter", counter_trade_proposal_path(proposal), class: "btn btn-sm btn-outline-warning" %>
            <% end %>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <div class="alert alert-info text-center mt-4" role="alert">
      <i class="bi bi-inbox-fill me-2"></i>No incoming trade proposals at the moment.
    </div>
  <% end %>
</div>
